<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Using Github – Working with data at HIP</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
div.callout-try.callout {
  border-left-color: #1f2859ff;
}
div.callout-try.callout-style-default > .callout-header {
  background-color: rgba(31, 40, 89, 0.13);
}
div.callout-try .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-try.callout-style-default .callout-icon::before, div.callout-try.callout-titled .callout-icon::before {
  content: '📌';
  background-image: none;
}
</style>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Working with data at HIP</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./getting-set-up.html"> 
<span class="menu-text">Getting set up</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./using-github.html" aria-current="page"> 
<span class="menu-text">Using Github</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./code-guidelines.html"> 
<span class="menu-text">Guidelines for code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/housinginitiative/working-with-data">
            Website repository
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/housinginitiative/working-with-data/issues/new">
            Make a suggestion
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why" id="toc-why" class="nav-link active" data-scroll-target="#why">Why</a></li>
  <li><a href="#where" id="toc-where" class="nav-link" data-scroll-target="#where">Where</a></li>
  <li><a href="#what" id="toc-what" class="nav-link" data-scroll-target="#what">What</a>
  <ul class="collapse">
  <li><a href="#repos" id="toc-repos" class="nav-link" data-scroll-target="#repos">Repos</a></li>
  <li><a href="#commits" id="toc-commits" class="nav-link" data-scroll-target="#commits">Commits</a></li>
  <li><a href="#branches" id="toc-branches" class="nav-link" data-scroll-target="#branches">Branches</a></li>
  </ul></li>
  <li><a href="#how" id="toc-how" class="nav-link" data-scroll-target="#how">How</a>
  <ul class="collapse">
  <li><a href="#create-a-repository" id="toc-create-a-repository" class="nav-link" data-scroll-target="#create-a-repository">Create a repository</a></li>
  <li><a href="#clone-the-repository" id="toc-clone-the-repository" class="nav-link" data-scroll-target="#clone-the-repository">Clone the repository</a></li>
  <li><a href="#create-a-branch" id="toc-create-a-branch" class="nav-link" data-scroll-target="#create-a-branch">Create a branch</a></li>
  <li><a href="#pull-in-changes-from-remote" id="toc-pull-in-changes-from-remote" class="nav-link" data-scroll-target="#pull-in-changes-from-remote">Pull in changes from <code>remote</code></a></li>
  <li><a href="#make-changes" id="toc-make-changes" class="nav-link" data-scroll-target="#make-changes">Make changes</a></li>
  <li><a href="#commit-and-push" id="toc-commit-and-push" class="nav-link" data-scroll-target="#commit-and-push">Commit (and push)</a></li>
  <li><a href="#submit-a-pull-request" id="toc-submit-a-pull-request" class="nav-link" data-scroll-target="#submit-a-pull-request">Submit a pull request</a></li>
  <li><a href="#review-and-resolve-the-pull-request" id="toc-review-and-resolve-the-pull-request" class="nav-link" data-scroll-target="#review-and-resolve-the-pull-request">Review and resolve the pull request</a></li>
  <li><a href="#finish-up-and-continue-the-cycle" id="toc-finish-up-and-continue-the-cycle" class="nav-link" data-scroll-target="#finish-up-and-continue-the-cycle">Finish up and continue the cycle</a></li>
  </ul></li>
  <li><a href="#tips" id="toc-tips" class="nav-link" data-scroll-target="#tips">Tips</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using Github</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This page describes why we use Github to organize our projects at HIP, and guides you through the workflow so you can feel comfortable using version control tools in your work.</p>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>This guide is intended to be hands-on. When you see this callout box, please try the task it suggests so you can follow along with the text.</p>
</div>
</div>
<p>But first, if you haven’t yet set up your Github account and installed Github Desktop, follow the steps <a href="./getting-set-up.html#github">here</a> before continuing.</p>
<section id="why" class="level1">
<h1>Why</h1>
<p>Github helps us do our work collaboratively in a well-organized way.</p>
<p>You’ve probably had the experience of a team project where you passed files back and forth between people, accumulating many different versions along the way. It was probably confusing and ineffective. But there are much better ways to manage collaboration and keep track of changes in projects. This is where Github steps in.</p>
<p><a href="https://github.com/">Github</a> is an easy-to-use interface for a version control system, which helps you structure your project (and the changes to your project) in a sensible, controlled way that works well whether you’re working by yourself or a dozen other people.</p>
<p>Of course, using a particular system doesn’t guarantee that how you use it is effective, so it’s also important to specify the workflow we use with Github. The workflow described in this guide is a widely-used approach which enables clearly structured project development and provides regular opportunities for code review and documentation.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Github is a particular platform for <a href="https://en.wikipedia.org/wiki/Git">Git</a>, which is the actual version control system under the hood. There are other services (e.g., GitLab), but Github is the most widely used platform and offers a myriad of other services that build on top of version control. This means that Github and Git are not synonymous, but here we use the term ‘Github’ since we’re using that specific platform.</p>
</div>
</div>
</section>
<section id="where" class="level1">
<h1>Where</h1>
<p>HIP’s home on Github is at the <a href="https://github.com/housinginitiative">housinginitiative</a> organization. You should already have joined the organization as a member, which should let you create and join repositories hosted by the HIP organization. You should also be able to see all our <a href="https://github.com/orgs/housinginitiative/repositories">existing repositories</a>, both public and private.</p>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check out the different tabs on the HIP organization page.</p>
</div>
</div>
</section>
<section id="what" class="level1">
<h1>What</h1>
<p>Before we dive in to the how-to, a quick round of definitions. If you’re not familiar with version control systems yet, this may sound a bit abstract, but don’t worry—we’ll be seeing these definitions in action soon.</p>
<section id="repos" class="level2">
<h2 class="anchored" data-anchor-id="repos">Repos</h2>
<p>A repository (<em>repo</em>, for short) is the main unit of organization for version control. You can think of a repo as all the code needed for a particular project—it can be as small or large as needed, but each project should get its own repo. A repo will have its own page on Github, which will show you the directories and files that are part of the repo, a readme telling you what the repo is about, a commit history page showing you what the repo looked like in the past, and links to associated project management tools like the issues page.</p>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check out what a repo’s page looks like; for example, the repo for <a href="https://github.com/housinginitiative/working-with-data">this website</a>.</p>
</div>
</div>
<p>It’s important to know, though, that the repo can live in multiple copies, or clones. The repo which is on the Github website (called the <code>remote</code> repo) is the reference version for practical purposes, but the version you clone to your own computer (see below) is an independent copy. This is why it’s important to distinguish between the version of the repo that lives on Github versus the version that lives locally on your machine: changing one will not affect the other, unless you tell Github to make the update (more on this below as well).</p>
</section>
<section id="commits" class="level2">
<h2 class="anchored" data-anchor-id="commits">Commits</h2>
<p>A commit is a <em>snapshot in time</em> of a repo. It tells you exactly what the repo looked like when the commit was made. You could think of a repo as basically a collection of commits, leading from one to the other. This means it’s easy to revert from one state to another, almost like a backup system. Commits are not created automatically, though—you create them explicitly when there is a meaningful snapshot to preserve.</p>
</section>
<section id="branches" class="level2">
<h2 class="anchored" data-anchor-id="branches">Branches</h2>
<p>The simplest kind of repo is like the trunk of a tree, with one commit linked to the next one in an unbranching chain. But Git is designed to work well with a <em>branched</em> structure, where different lines of commits can branch out from the main trunk (which we call <code>main</code>). Think of branches as separate lines of development, which allows work on different parts of the repo to happen in parallel. When the purpose of the branch is completed, they can be folded in to <code>main</code>, bringing all of its changes with it. This is an important aspect of how we use Github, and we’ll work more with branches below.</p>
</section>
</section>
<section id="how" class="level1">
<h1>How</h1>
<p>In this section, we’ll practice a small-but-complete example of a standard version control workflow, demonstrating tasks that you will do routinely when you’re developing code. We’ll work with the Github website and the Github Desktop application to do this. Read each section first, then follow the ‘Try it yourself’ step at the end of the section.</p>
<section id="create-a-repository" class="level2">
<h2 class="anchored" data-anchor-id="create-a-repository">Create a repository</h2>
<p>The very first order of business when setting up a new project repo is to discuss with your colleagues how your project should be structured. This might change as the project progresses, but everyone working on the same project should be on the same page before project infrastructure is created.</p>
<p>Once that is done, <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository">a repository should be created</a> if it hasn’t been already. Head to our Github org’s <a href="https://github.com/orgs/housinginitiative/repositories">repositories page</a> and click the green ‘New Repository’ button. Note that the ‘Owner’ field is already set to the housinginitiative organization.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Any repo created for HIP work should live in the housinginitiative organization, rather than belonging to an individual’s account.</p>
</div>
</div>
<p>Next to that field is the ‘Repository name’ field. The convention here is to use all lowercase with hyphens as separators. When you start a project, a name should be chosen that will be used on all platforms referring to that project, including on Github; this should be one of the things that the project team should have decided on already.</p>
<p>A repo can be public or private—private repos are only visible to members of the housinginitiative organization plus any external collaborators you add to that project; for everyone else, the repo page will return a 404 error. A project repo should be private (though your team may make it public later).</p>
<p>You should always enable the ‘Add a README file’ option, and add a .gitignore file for R. The README file creates a mini ‘front page’ for your repo which should describe what the repo is about. The .gitignore file is there so files that are specific to your system and not relevant for others’ machines are not going to clutter up the repo.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can automatically apply this basic setup by simply using the template repo for our organization: at the top of the ‘Create a new repository’ page, select the drop-down menu under ‘Repository template’ and select <code>housinginitiative/hip-template-repo</code>, and just fill in your repo’s name. I recommend you use the template.</p>
</div>
</div>
<p>Once you create a repository, invite your team by clicking on ‘Settings’ near the top of the repo page and selecting ‘Collaborators and teams’ on the left-hand menu of the settings page. Currently, everyone part of the housinginitiative organization will be able to read the repo, but not write to it. Click ‘Add people’ and select from the menu. At least one other person from HIP should have the ‘Admin’ role; otherwise ‘Maintain’ or ‘Write’ is fine.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you add people by their username, make sure that it’s the correct username! Copy-paste directly from their user profile page.</p>
</div>
</div>
<p>The next order of business is to edit the project’s main README to include information about the project and include a link to the project’s Box directory. If you used the project template, there should placeholders already.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you used the template repo, the .gitignore file includes an entry for <code>.DS_Store</code>, a ubiquitous user configuration file in Mac OS. If you did not use the template repo, you should edit the .gitignore file to include it—otherwise it will cause issues.</p>
<p>Mac users reading this guide are also recommended to <a href="https://docs.github.com/en/get-started/git-basics/ignoring-files#configuring-ignored-files-for-all-repositories-on-your-computer">edit their <em>global</em> .gitignore file</a> on their machine so this file is ignored regardless of whether the repo’s .gitignore specifies it.</p>
</div>
</div>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now try creating your own test repo for this guide! But create this repo under your own account, not the HIP organization.</p>
</div>
</div>
</section>
<section id="clone-the-repository" class="level2">
<h2 class="anchored" data-anchor-id="clone-the-repository">Clone the repository</h2>
<p>Now the repository has been created, or you have been added to one that already exists. But how would you access the files on your own computer? You could download files individually, but those files would be regular files and not tracked under version control. What you want to do is to create a linked copy, or a <em>clone</em>, of the repo on your local machine.</p>
<p>There are <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository">several ways</a> to do this, but the simplest is just to click the green ‘Code’ button from the repo’s Github page, then select ‘Open with Github Desktop’.</p>
<p><img src="https://docs.github.com/assets/cb-44807/mw-1440/images/help/repository/open-with-desktop.webp" class="img-fluid" style="width:40.0%"></p>
<p>That should open up Github Desktop—in the dialog window, select where on your computer the repo will be cloned to, then click ‘Clone’.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>I recommend creating a directory on your computer where you will keep all your cloned repos, for example <code>Documents/Projects</code></p>
</div>
</div>
<p>In the Github Desktop window, you will see the current repo’s name in the upper-left corner. Left-clicking on that box will show you the list of all the repos on your computer. Right-clicking on that box will show you options to open the repo in your Finder/File Explorer, or to open the repo’s Github page. (These links are also in the main part of the Github Desktop window.)</p>
<p>Note that the repo directory on your machine is a regular directory, like anything else on your computer—you can open files, add or delete files, edit files, or add subdirectories. <em>However</em>, this directory is also linked to Git, the version control system. Any changes you make to your directory will show up on the Github Desktop window for that repo, tracking all the changes you made. That also means that Git can change that directory when you perform Git actions like pulling or changing branches (see below).</p>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Clone your practice repo that you created above, and open the repo directory in your file browser.</p>
</div>
</div>
</section>
<section id="create-a-branch" class="level2">
<h2 class="anchored" data-anchor-id="create-a-branch">Create a branch</h2>
<p>As we saw above, <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-branches">branches</a> are a way to keep lines of development well organized. If you have multiple people working on a repo, it’s important to organize that work to prevent people from stepping on each other’s toes.</p>
<p>Branches should be viewed as more-or-less self-contained mini-projects. A branch should generally address one issue (or a few small related issues), and have only one person working on the branch at a time. This way, each person working on the project has their own ‘box’ and it is easier to keep track of who is doing what.</p>
<p>Branches can be created directly, by clicking on the ‘Current Branch’ tab at the top of the Github Desktop window, then selecting the ‘New Branch’ button. Give the branch a short but descriptive name for the task you want to get done on this branch, again using nothing but lowercase letters and hyphens. Once you create the branch, you should see a new option pop up on the third box at the top of the Github Desktop window: ‘Publish branch’. Click on this option, and Github Desktop will publish the branch to the <code>remote</code> repo on Github. (Remember, <code>remote</code> is the version of the repo that lives on Github, i.e., the cloud. Changes you make to your local repo won’t be propagated to <code>remote</code> unless you explicitly tell Git to do so.)</p>
<p>We can also approach this from the other way around. Instead of creating a branch and naming it after a task, we can first define the task then create a branch to address it. Github offers an excellent interface to do this via the <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/about-issues">Issues</a> page, which you can access via your repo’s Github page, among the options on the top. On that page, you can add issues, describing what the issue is about and what needs to be done to complete it. Once you create the issue, you will see on the right side of the issue’s page an option to <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/creating-a-branch-for-an-issue">create a branch directly</a> from the issue page. This is a great way to define the purpose of your branch before you create it.</p>
<p><img src="https://docs.github.com/assets/cb-28712/mw-1440/images/help/issues/create-a-branch.webp" class="img-fluid" style="width:40.0%"></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Always be aware of which branch you’re in. Moving between branches will change the files in your repo directory. Always save your work before changing branches!</p>
</div>
</div>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Go to your project’s Github page, create an issue, and create a branch from the issue.</p>
</div>
</div>
</section>
<section id="pull-in-changes-from-remote" class="level2">
<h2 class="anchored" data-anchor-id="pull-in-changes-from-remote">Pull in changes from <code>remote</code></h2>
<p>Before you start on a day’s work, it’s a good idea to make sure your local repo is in sync with the remote repo on Github. If you are the only person working on a branch (which should usually be the case), there should not be changes to your branch on <code>remote</code>, but if you are accessing the repo from another computer or changes have accumulated on <code>main</code>, you will need to update the state of your local repo.</p>
<p>You can do this easily from Github Desktop. First, make sure you are in the branch you want. Then, click the ‘Fetch origin’ button at the top of the Github Desktop window to see if the <code>remote</code> repo has changed (yes, you need to ask directly whether changes have been made to <code>remote</code>; they will not be automatically fetched). If the branch has changed on <code>remote</code>, Github Desktop will show you the ‘Pull origin’ button: selecting this button will update your local repo directory with the changes. (For our purposes, <code>origin</code> is just another name for <code>remote</code>.)</p>
<p>Keep in mind that ‘Pull origin’ only updates the branch you are in currently. Changes <em>between</em> branches will not be synced to each other unless you <em>merge</em> in the changes. Usually, branches will be short-lived and changes will not accumulate too much on other branches. But if there have been changes in <code>main</code> while you’re working on your branch, be sure to merge in <code>main</code> to your own branch (instructions <a href="https://docs.github.com/en/desktop/working-with-your-remote-repository-on-github-or-github-enterprise/syncing-your-branch-in-github-desktop">here</a>).</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>But never merge in your branch directly <em>to</em> <code>main</code>! If you want to update <code>main</code>, you should always use pull requests to do so (see below).</p>
</div>
</div>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Fetch and pull from origin. This should make the branch you just made on Github available on your local machine. Switch to that branch.</p>
</div>
</div>
</section>
<section id="make-changes" class="level2">
<h2 class="anchored" data-anchor-id="make-changes">Make changes</h2>
<p>This is where you will spend the most of your time: developing your code.</p>
<p>As you do so, keep these things in mind:</p>
<ol type="1">
<li>Keep your environment clean (see <a href="./code-guidelines.html#dirty-environments">here</a> for more). When someone else on your team pulls in your changes, they should be able to run your code out of the box.</li>
<li>Github is NOT appropriate for storing any private data: such data should only be stored on Box. Don’t include any private information in your code either (e.g., someone’s name or address).</li>
<li>Version control is a tool for keeping track of code. Small images or HTML outputs are fine to include, but don’t store large binary files (like Excel files) in your repo.</li>
</ol>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now that the preparation is done, let’s make some changes! Create a new file, and edit the README. Remember, your repo is just a directory with some special powers—you can find and edit your files like normal.</p>
</div>
</div>
</section>
<section id="commit-and-push" class="level2">
<h2 class="anchored" data-anchor-id="commit-and-push">Commit (and push)</h2>
<p>We saw above that commits are like snapshots that make up the content of the repo. But changes that you save to your machine’s disk are <em>not</em> committed. They’re just changes. To make a commit out of your changes, you need to tell Git to do so explicitly.</p>
<p>This is easy using Github Desktop: on the left-hand side of the window, you’ll see a list of files which have been changed. Depending on how they were changed, you’ll see different icons for deleted, added, or edited files. (If you don’t see your changes, make sure your changes are saved to disk.)</p>
<p><img src="https://docs.github.com/assets/cb-16555/mw-1440/images/help/desktop/commit-all.webp" class="img-fluid" style="width:40.0%"></p>
<p>You can click on the different files to see the highlighted <em>diffs</em>: the differences between the previous commit and your current changes.</p>
<p>Before proceeding, make sure you are in the branch you are working in. If not, click the branch tab at the top of the Github Desktop window and select the branch you want to move to. When Github Desktop asks you if you want to bring your changes along, say ‘Yes’.</p>
<p>To create a new commit for these changes, write a short message in the box that appears below the list of changed files. This is your commit message.</p>
<p><img src="https://docs.github.com/assets/cb-49326/mw-1440/images/help/desktop/create-commit-details.webp" class="img-fluid" style="width:30.0%"></p>
<p>Commit messages are what you’ll read when you (or anyone else) browse through your repo, so it’s important that they are meaningful and readable. The convention here is to use present-tense verbs to describe your changes (for example, “Include Box link in README”). There is also a larger ‘Description’ box, where you can write a longer description if you want. This is optional, but the commit message is required. Once you’re happy with the commit message, click the blue ‘Commit to [branchname]’ button to create the commit.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Without commit messages, it would be nearly impossible to understand how a repo evolved. Because of this, commit messages appear everywhere on Github’s UI. Good commit messages are visible marks of professionalism: here are some <a href="https://cbea.ms/git-commit/">helpful tips</a>.</p>
</div>
</div>
<p>This is <em>how</em> you create a commit, but <em>when</em> you commit is also important. Commits should be meaningful in themselves—you don’t want to commit every 5 minutes and clutter up your repo’s history, but you also don’t want commits to be a smörgåsbord of different types of changes. The point above about commit messages is helpful here, too: you should commit when your changes add up to a good commit message. Generally, one to four commits a day might be reasonable.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sometimes you might get carried away and make a number of changes that should belong to separate commits. In that case, you can select which changes you want to be part of the first commit, and commit the rest separately.</p>
<p>In Github Desktop’s ‘Changed Files’ window, check and uncheck which files you want to be part of the commit. (Unchecked changes are still saved and are available for future commits, unless you discard them.)</p>
</div>
</div>
<p>Once you’ve committed, it’s time to <em>push</em> your commit to Github—unless you do this explicitly, your changes will stay isolated on your machine. Github Desktop will helpfully surface this action for you at the top of the window.</p>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create one commit for the addition of the new file into your repo, and another for the edits to the README file. Then push.</p>
</div>
</div>
</section>
<section id="submit-a-pull-request" class="level2">
<h2 class="anchored" data-anchor-id="submit-a-pull-request">Submit a pull request</h2>
<p>Once you’re done with the task you created your current branch for, it’s time to incorporate your new commits to <code>main</code>.</p>
<p>You do this via pull requests (or <em>PR</em>s). PRs are a method to make your work available for inspection and comment before they are formally brought into <code>main</code>. Think of <code>main</code> as the ‘official record’, and PRs as draft reviews. A PR will include all the commits you’ve made so far in the branch, including all the diffs to changed files. A reviewer will be able to view the diffs and comment on them if desired. If you’ve ‘suggested edits’ or commented on a Google doc, this is the same principle, except that in this case the changes (your working branch) and the thing being changed (<code>main</code>) are kept separated until the PR is approved.</p>
<p>Who is the reviewer? This will depend on the project. Generally, you should have at least one colleague who can and should review your code. Sometimes, you will be the only person working on a repo, in which case you should review your own code; though this is not ideal, the mechanism of the PR still enforces the concept of review and documentation, which is good.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You might be wondering why it’s called a <em>pull</em> request when you are requesting to <em>push</em> into <code>main</code>. This is because <code>main</code> is the permanent branch and so we take its perspective—from <code>main</code>’s perspective, the changes are being <em>pulled</em> into it.</p>
</div>
</div>
<p>Creating a pull request is also easy from Github Desktop: when you have any commits in your branch, a prominent blue ‘Create Pull Request’ button appears on the Github Desktop window. Clicking this button opens a webpage where you can write a description and officially submit the pull request. The description here should concisely describe what your changes do, which gives your reviewer (or future you) the context needed to properly interpret your changes. This could be as simple as: ‘Completes issue #9’, or a longer statement if your task was complex or if you are uncertain whether your PR fully addresses the issue.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the PR description field, using the hash sign <code>#</code> before a number will create a link to the issue page with that number.</p>
</div>
</div>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a PR for your commits.</p>
</div>
</div>
</section>
<section id="review-and-resolve-the-pull-request" class="level2">
<h2 class="anchored" data-anchor-id="review-and-resolve-the-pull-request">Review and resolve the pull request</h2>
<p>Once the PR is created, the reviewer (which could be you) should view the changes proposed in the PR and ask for any clarifications or changes, if necessary. To view PRs, click on the ‘Pull requests’ button near the top of the repo’s Github page. From there, view the PR description and click on the ‘Files changed’ tab to view the list of diffs. Additions will be highlighted in green, deletions in red. The list of files changed will be displayed to the pane on the left.</p>
<p>If you have a question or suggestion for the PR submitter, hover over the relevant line of code in the diffs to add a comment. Once you’re done with the comments, click the green ‘Start a review’ button.</p>
<p><img src="https://docs.github.com/assets/cb-44227/mw-1440/images/help/commits/hover-comment-icon.webp" class="img-fluid" style="width:40.0%"></p>
<p>You can also add general comments as a reply to the overall PR description.</p>
<p>Once you’re done with the review, let the submitter know so they can respond. The submitter can create new commits on the same branch the PR is from, and that will update the PR as well. The reviewer will see a ‘Refresh’ button if this happens and they haven’t refreshed the PR page yet. The cycle of comments and changes can continue until the PR is ready for approval. Once the reviewer approves the PR, the committed changes are merged into <code>main</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>One potential complication: 95% of the time, if work has been well organized into branches, the merge should go smoothly. However, if the same file was changed in both of the branches being merged, a <em>merge conflict</em> may occur. In this case, the conflict must be manually resolved: the instructions are documented <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/addressing-merge-conflicts/resolving-a-merge-conflict-on-github">here</a>. If there is a merge conflict, everyone should be on the same page about how it should be resolved.</p>
</div>
</div>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Review your own PR: look at the diffs, try out the comment function, then approve the PR.</p>
</div>
</div>
</section>
<section id="finish-up-and-continue-the-cycle" class="level2">
<h2 class="anchored" data-anchor-id="finish-up-and-continue-the-cycle">Finish up and continue the cycle</h2>
<p>Once the PR has been approved, the person who created the branch should delete it from both their local repo and from <code>remote</code>. This will keep the list of branches tidy. The associated issue should also be <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/administering-issues/closing-an-issue">closed</a>.</p>
<p>At this point, the project documentation (e.g., the README file) should be updated to reflect the new changes, if needed.</p>
<p>And that’s it! Now the cycle is ready to begin again: discuss what the next tasks are, create issue pages for the tasks, start new branches, commit in new changes as needed, PR submission/review/approval, and clean up.</p>
<div class="callout callout-style-default callout-try callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>Delete your branch and close the associated issue. If you have any questions, please reach out to Chi-Hyun.</p>
</div>
</div>
</section>
</section>
<section id="tips" class="level1">
<h1>Tips</h1>
<ol type="1">
<li>Github Desktop is fairly smart about suggesting actions, on the top-right of the application’s window. These suggestions should generally be followed.</li>
<li>Remember that your <em>local</em> repository is not the same as the <em>remote</em> repository (also called ‘origin’). They are linked but independent entities. Changes made to the remote repository won’t be visible on your local machine unless you take some action. You won’t even know that there <em>are</em> changes to the remote repo unless you fetch it.</li>
<li>The remote repository (on GitHub) is the authoritative source because it’s the one that everyone in the project (and any future readers) has access to.</li>
<li>Always make sure your local repository is up to date with the remote repository before starting work. (‘Fetch Origin’ then (if there are changes) ‘Pull Origin’ on Github Desktop.)</li>
<li>Make commit messages clear and don’t use the default message.</li>
<li>Committing only takes a snapshot of a particular branch on a particular repository. It does <em>not</em> update the remote repository, so push after you commit.</li>
<li>When your colleagues submit a pull request, review it promptly, both so that you are aware of the changes being made, and so that their work can continue.</li>
<li>On the other side, if someone reviewing your PR has a comment or asks a question, answer them promptly so the PR can move forward.</li>
<li>If you are uncertain about a feature in Git/Github/Github desktop, Github will probably have a helpful documentation page you can find with a web search.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>See the <a href="./code-guidelines.html#version-control">Version control</a> section of the Code Guidelines page for more on how to integrate version control into your projects.</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>